    <div id ="default_div">

    <input id="default_text" name="default_text" type="text" value="Default Text" disable =" true" />
    <label id ="default_label" name ="default_label"> Default Label </label>
    <input type="button" id ="default_button" name="default_button"  value="Default Button" onclick ="$('default_label').remove();$('default_text').remove()" >

     </div>

    <div id ="default_div_field" hide ="false" >
    <input id="default_text" name="default_text" type="text" value="Display Field" disable =" true" />
    <label id ="default_label" name ="default_label"> Display Field </label>
     </div>
         <div id ="default_div_order">
    <input id="default_text" name="default_text" type="text" value="Display Field" disable =" true" />
    <label id ="default_label" name ="default_label"> Display Field </label>
     </div>

<% @table_options = session[:table_options] %>
   <% @table_index = session[:table_index] %>
   <%  @search_controllers = session[:@search_controllers] %>
   <%  @search_controller = session[:search_controllers][@table_index ] %>

<h1 id="table_heading">Listing <%= @table_options[@table_index][0].pluralize  %> </h1>

 <form action="/people/table_submit" id="search_form" method="post">
<!--- form_tag :action => :table_search -->
    <div id ="default_div_order">
    <input id="default_order_text" name="default_order_text" type="text" value="Display Field"/>
    </div>


<!-- This is the selection of possible filters list box and the filters themselfs-->
 

  <%= select_tag "table_selector", options_for_select(@table_options,  @table_index) %> 

  <div>
 
    <select id="possible_filters"><option>example</option> </select>

    <input type="button" id ="add_filter" name="add_filter"  value="Add search filter" >
  </div>


  <div id ="current_filters">  

  </div>
  <div id ="current_fields">

  </div>
  <div>
    <%= submit_tag "Search", :class => 'table_search', :id => 'table_search' %>
    <%= submit_tag "Create new database entry", :class => 'new_entry', :id => 'new_entry'  %>
  </div>
  </form>


<%  form_tag :action => :delete_entries do %>
  <div>
     <select id="field_selector"><option>example</option> </select>
      <input type="button" id ="add_field" name="add_field"  value="Add display field" >
     
  </div>

  <div id="search_headers_div">
   <table  id="search_headers" >         
      <tr class="column-header">
          <th > </th>
      </tr>
      <tr class="column-header">      
          <th >
          
          <span class="remove_column"><a href ="#" >X</a> </span>
          </th>
      </tr>
      
   </table>
   Click search to see results
  </div>
  <div>
    <table  id="search_results" >

      <tr class="column-header">
        <% for field_index in @search_controller.current_field_indices %>
           <% field_name = @search_controller.available_fields[field_index].tag %>
          <th class= <%="'#{field_name}'"%> > 
    <% on_click_order_string = "searchOrder('#{field_index}');return false" %>
         <a href ="#" onclick= <%="\"#{on_click_order_string}\""%> >
        <%= @search_controller.available_fields[field_index].qualifier %>
         </a>
        </th>
        <%  end  %>
        <th class="select-cell"></th>
         <th class="update-cell"></th>
          <th class="copy-cell"></th>
        <th class="delete-cell"></th>
      </tr>
      <tr class="column-header">
        <% for field_index in @search_controller.current_field_indices %>
           <% field_name = @search_controller.available_fields[field_index].tag %>
         <th  class =<%="'#{field_name}'"%> >
         <% on_click_order_string = "searchOrder('#{field_index}');return false" %>
         <a href ="#" onclick= <%="\"#{on_click_order_string}\""%> >
    <%= @search_controller.available_fields[field_index].header %>
         </a>
         <% on_click_string = "deleteColumn('#{field_name}');return false" %>
          <span class="remove_column"><a href ="#" onclick= <%="\"#{on_click_string}\""%> >X</a> </span>
        </th> 
        <%  end  %>
       
        <th class="select-cell">Select</th>
         <th class="update-cell"></th>
          <th class="copy-cell"></th>
        <th class="delete-cell"></th>
       
        
      </tr>

      <% for row in @table %>
        <tr class="<%= cycle('row-even', 'row-odd') %>">
          <%  for field_index in @search_controller.current_field_indices %>
             <% field_name = @search_controller.available_fields[field_index].tag %>
             <td class =<%="'#{field_name}'"%> >
                <% begin %>
                      <%= eval(@search_controller.available_fields[field_index].eval) %>
                <%rescue Exception => exc %>
                      <%=  "" %>
                <% end %>

            </td>
          <% end %>
          
          <td class ="select-cell"> <input type="checkbox" name ="row_in_list[]" class="check" value= <%=row.id.to_s %>  ></td>
          <td class="update-cell"><%=  link_to "Edit", {:action => :edit, :id =>row.id.to_s} %>|</td>
          <td class="copy-cell"><%=  link_to "Copy", {:action => :copy, :id =>row.id.to_s} %>|</td>
          <td class="delete-cell"><%=  link_to "Delete", {:action => :delete, :id =>row.id.to_s}, :confirm => "Are you sure you want to delete this record and all its dependencies?"  %> </td>
          

    
         
        </tr>

      <% end %>
      <% if  @table.length >10 %>
      <tr class="column-header">
        <% for field_index in @search_controller.current_field_indices %>
           <% field_name = @search_controller.available_fields[field_index].tag %>
          <th  class = <%="'#{field_name}'"%> > 
    <% on_click_order_string = "searchOrder('#{field_index}');return false" %>
         <a href ="#" onclick= <%="\"#{on_click_order_string}\""%> >
          <%= @search_controller.available_fields[field_index].header %>
         </a>
            <% on_click_string = "deleteColumn('#{field_name}');return false" %>
          <span class="remove_column"><a href ="#" onclick= <%="\"#{on_click_string}\""%> >X</a> </span>
          </th>
        <%  end  %>
        <th class="select-cell">Select</th>
         <th class="update-cell"></th>
          <th class="copy-cell"></th>
        <th class="delete-cell"></th>
      </tr>
      <tr class="column-header">
        <% for field_index in @search_controller.current_field_indices %>
           <% field_name = @search_controller.available_fields[field_index].tag %>
          <th class = <%="'#{field_name}'"%> >
    <% on_click_order_string = "searchOrder('#{field_index}');return false" %>
         <a href ="#" onclick= <%="\"#{on_click_order_string}\""%> >
          <%= @search_controller.available_fields[field_index].qualifier %>
         </a>          
         </th>
        <%  end  %>
        <th class="select-cell"></th>
         <th class="update-cell"></th>
          <th class="copy-cell"></th>
        <th class="delete-cell"></th>
      </tr>
      <% end %>
    </table>
  </div>

  <div id="group_selection">
  <div > 

    <input type="button" class ="check" value="Select All"
           onClick="$$('#search_results input.check').each(function(box){box.checked=true})">
    <input type="button" class ="check"  value="Deselect All"
           onClick="$$('#search_results input.check').each(function(box){box.checked=false})">
    <input type="button" class ="check" value="Invert Selection"
           onClick="$$('#search_results input.check').each(function(box){box.checked=!box.checked})">


  </div>
  <div id ="list_buttons" class ="select_cell">
    <%= submit_tag "Delete selected entries",  :confirm => 'Are you sure you want to delete all selected items and their dependencies from the database?' , :class => 'list_button'%>
  </div>




<% end  %>
  </div>


<div > <% form_tag :action => :import_csv do %>
    <p> <%= submit_tag "Import CSV" %></p>
<% end %></div>

<div > <% form_tag :action => :import_courses do %>
    <p> <%= submit_tag "Import Courses CSV" %></p>
<% end %></div>


<p><%= link_to "Back to main menu", {:controller => "index"  } %> </p>





