

<h1>Listing people</h1>




<%  form_tag :action => :list_update do %>
  <div>
<table  id="name_selection" >
  <tr>
    <th>Title</th>
    <th>First name</th>
    <th>Second name</th>
    <th>Postnomials</th>
    <th>Entry year</th>
    <th>Select</th>
  </tr>

<% for person in @people %>
  <tr>
    <td><%=link_to (h person.title), person, :popup => true  %></td>
    <td><%=link_to (h person.first_name), person, :popup => true  %></td>
    <td><%=link_to (h person.second_name), person, :popup => true  %></td>
    <td><%=link_to (h person.postnomials), person, :popup => true  %></td>
    <td><%=h person.entry_year %></td>    
    <td><%=link_to "Show", person, :id => person.id, :popup => true %></td> 
    <td><%= link_to 'Delete', person, :confirm => 'Are you sure?', :method => :delete %></td>
   <td> <input type="checkbox" name ="person_in_list[]" class="check" value= <%=person.id.to_s %>  ></td>
    <!--  <td> <%= check_box_tag "person_in_list[]", person.id, false %> </td> -->
     <!--  <td><%= check_box_tag "person_in_list[]", person.id, false %></td> -->
  </tr>
<% end %>


</table>
</div>
<div>

<input type="button" class ="check" value="Select All"
onClick="$$('#name_selection input.check').each(function(box){box.checked=true})">
<input type="button" class ="check"  value="Deselect All"
onClick="$$('#name_selection input.check').each(function(box){box.checked=false})">
<input type="button" class ="check" value="Invert Selection"
onClick="$$('#name_selection input.check').each(function(box){box.checked=!box.checked})">

  
</div>
<div id ="group_buttons">
<%= select_tag "group_list", options_for_select((Group.new).group_list_strings, 0) %>

 <%= submit_tag "Add selected to list", :class => 'list_button', :id => 'add_to_group_button' %>
<%= submit_tag "Remove selected from list", :class => 'list_button'  %>
<%= submit_tag "Delete list",  :confirm => 'Are you sure you want to delete this list?' , :class => 'list_button'%>


</div>
<div id ="group_buttons2"><%= submit_tag "Add to new list" , :id => 'new_group_button'%>
 <%= text_field_tag :new_group_name %>
</div>
<% end  %>



  <div > <% form_tag :action => :search do %>
  <p > <%= text_field_tag :searchstr2nd, session[:searchstr2nd] %><label class="search_field">Second Name Filter</label>  e.g. <code>H%r</code> gives second names beginning with H and ending with r</p>
  <p > <%= text_field_tag :searchstr1st, session[:searchstr1st] %><label class="search_field">First Name Filter</label> e.g. <code>%([a-e]|[t-z])_ </code>  gives first names with penultimate letter in range a to e or in the range t to z</p>
 <p > <%= text_field_tag :searchstrYear, session[:searchstrYear] %><label class="search_field">Entry year Filter</label> e.g. <code>2007</code> gives entry year 2007</p>
<%= select_tag "sort[]", options_for_select(Person::SortString, Person::SortString[session[:sortOption]]) %>
 
<p> <%= submit_tag "Search" %></p>
<% end %></div>

<div > <% form_tag :action => :import_csv do %>
<p> <%= submit_tag "Import CSV" %></p>
<% end %></div>

<div > <% form_tag :action => :import_courses do %>
<p> <%= submit_tag "Import Courses CSV" %></p>
<% end %></div>

<p><%= link_to "Add a new person", {:action => :new } %></p>
<p><%= link_to "Back to main menu", {:controller => "index"  } %> </p>
<br />


  
</div>

