

CREATE TABLE people_csv (did integer PRIMARY KEY, old_name varchar, title varchar, first_name varchar, second_name varchar, postnominals varchar, salutation varchar,  term_address varchar, term_city varchar, term_postcode varchar, term_home_phone varchar, term_work_phone varchar, mobile varchar, email varchar, other_address varchar, other_city varchar, other_postcode varchar, other_home_phone varchar, Fax varchar, Notes text, supervisor integer, entry_year integer, matriculated boolean, senior_status boolean, programme integer, religious_house integer, next_of_kin  varchar, home_institution integer, conventual_name varchar);

COPY people_csv FROM '/home/agathaapp/AgathaJPG/people.csv' DELIMITERS ',' CSV;
---------------------------------------------------------------------------------------------------------------------------------
agathaapp@verrill-laptop:~/workspace/agatha$ ruby script/generate model person_csv old_name:string title:string first_name:string second_name:string postnominals:string salutation:string term_address:string term_city:string term_postcode:string term_home_phone:string term_work_phone:string mobile:string email:string other_address:string other_city:string other_postcode:string other_home_phone:string Fax:string Notes:text supervisor:integer entry_year:integer matriculated:integer senior_status:boolean programme:integer religious_house:integer next_of_kin:string home_institution:integer conventual_name:string

agathaapp@verrill-laptop:~/workspace/agatha$ gedit db/migrate/20090330231438_create_person_csvs.rb #delete t.timestamps

agathaapp@verrill-laptop:~/workspace/agatha$ rake db:migrate

agathaapp@verrill-laptop:~/workspace/agatha$ psql agatha_dev verrill
agatha_dev=# COPY person_csvs FROM '/home/agathaapp/AgathaJPG/people.csv' DELIMITERS ',' CSV;

ruby script/generate model institution old_name:string title:string first_name:string second_name:string salutation:string term_address:string term_city:string term_postcode:string conventual_name:string institution_type:boolean

ruby script/generate migration add_institution_to_person institution:integer

ruby script/generate model status_csv status:string student:boolean tutor:boolean sort_key:integer
gedit db/migrate/20090331162241_create_status_csvs.rb #delete t.timestamps
rake db:migrate
agatha_dev=# COPY status_csvs FROM '/home/agathaapp/AgathaJPG/statuses2.csv' DELIMITERS ',' CSV;

ruby script/generate model personstatus_csv person_id:integer status_id:integer
gedit db/migrate/20090331163023_create_personstatus_csvs #delete t.timestamps
rake db:migrate
agatha_dev=# COPY personstatus_csvs FROM '/home/agathaapp/AgathaJPG/peoplestatuses.csv' DELIMITERS ',' CSV;

ruby script/generate model group group_name:string
ruby script/generate model group_member group_id:integer person_id:integer
rake db:migrate

ruby script/generate model course_csv course_name:string paper_number:string studium_course:boolean evening_course:boolean
gedit db/migrate/20090401150948_create_course_csvs #delete t.timestamps
rake db:migrate
agatha_dev=# COPY course_csvs FROM '/home/agathaapp/AgathaJPG/coursetitles.csv' DELIMITERS ',' CSV;

agatha_dev=# DELETE FROM people;
agatha_dev=# DELETE FROM group_members;
agatha_dev=# DELETE FROM courses;

ruby script/generate migration add_params_to_lecture  location:integer number_of_classes:integer number_of_lectures:integer notes:text
#remove hour, add lecture_time:time
ruby script/generate model lecture_csv term:integer course:integer tutor:integer number_of_lectures:integer number_of_classes:integer hours:integer notes:text examination:string day:integer lecture_time:timestamp
gedit db/migrate/20090401150948_create_lecture_csvs #delete t.timestamps
rake db:migrate
agatha_dev=# COPY lecture_csvs FROM '/home/agathaapp/AgathaJPG/lecture_courses.csv' DELIMITERS ',' CSV;

ruby script/generate model term_csv name:integer startdate:timestamp year:integer
gedit db/migrate/20090401150948_create_term_csvs #delete t.timestamps
rake db:migrate
agatha_dev=# COPY term_csvs FROM '/home/agathaapp/AgathaJPG/terms.csv' DELIMITERS ',' CSV;

ruby script/generate model term term_number:integer year:integer
rake db:migrate

ruby script/generate model attendee_csv student:integer lectures_course:integer compulsory:boolean examined:boolean mark:string
gedit db/migrate/20090401150948_create_attendee_csvs #delete t.timestamps
ruby script/generate migration add_params_to_attendees compulsory:boolean mark:integer mark_type:integer
rake db:migrate
agatha_dev=# COPY attendee_csvs FROM '/home/agathaapp/AgathaJPG/lectures.csv' DELIMITERS ',' CSV;

ruby script/generate migration add_comment_to_attendees comment:text
rake db:migrate

ruby script/generate model day_csv long_name:string short_name:string
gedit db/migrate/20090401150948_create_day_csvs #delete t.timestamps
ruby script/generate model day long_name:string short_name:string Sunday:boolean Monday:boolean Tuesday:boolean Wednesday:boolean Thursday:boolean Friday:boolean Saturday:boolean
rake db:migrate
agatha_dev=# COPY day_csvs FROM '/home/agathaapp/AgathaJPG/days.csv' DELIMITERS ',' CSV;

ruby script/generate model willing_teacher_csv tutor:integer course:integer notes:text
gedit db/migrate/20090401150948_create_willing_teacher_csvs #delete t.timestamps
ruby script/generate model willing_teacher person_id:integer course_id:integer order_of_preference:integer can_lecture:boolean can_tutor:boolean notes:text
rake db:migrate
agatha_dev=# COPY willing_teacher_csvs FROM '/home/agathaapp/AgathaJPG/willing_to_teach.csv' DELIMITERS ',' CSV;

ruby script/generate model tutorial_csv student:integer term:integer course:integer tutor:integer number:integer mark:string hours:integer notes:text
gedit db/migrate/20090401150948_create_tutorial_csvs #delete t.timestamps
ruby script/generate model tutorial_schedule person_id:integer course_id:integer term_id:integer total_tutorials:integer status:integer
ruby script/generate model tutorial person_id:integer tutorial_id:integer number_of_tutorials:integer hours:integer comment:text mark:integer mark_type:integer
rake db:migrate
agatha_dev=# COPY tutorial_csvs FROM '/home/agathaapp/AgathaJPG/tutorials.csv' DELIMITERS ',' CSV;

ruby script/generate migration add_notes_to_tutorials notes:text
rake db:migrate

agatha_dev=#  DELETE FROM attendees; DELETE FROM lectures; DELETE FROM courses; DELETE FROM people;DELETE FROM terms; DELETE FROM group_members;DELETE FROM groups; DELETE FROM institutions;DELETE FROM days;DELETE FROM willing_teachers; DELETE FROM tutorials; DELETE FROM tutorial_schedules;DELETE FROM locations;


ruby script/generate migration rename_person_institution_to_institution_id

ruby script/generate model location name:string max_people:integer
gedit db/migrate/20090401150948_create_day_csvs #delete t.timestamps

ruby script/generate migration rename_lecture_term_to_term_id
do checkbox stuff for editing lists.

agathaapp@rover> su root
root@rover> su postgres
postgres@rover>psql agatha3 postgres
agatha3=# COPY person_csvs FROM '/home/agathaapp/AgathaJPG/person6.csv' DELIMITERS ','; COPY status_csvs FROM '/home/agathaapp/AgathaJPG/statuses2.csv' DELIMITERS ','; COPY personstatus_csvs FROM '/home/agathaapp/AgathaJPG/peoplestatuses2.csv' DELIMITERS ',';  COPY course_csvs FROM '/home/agathaapp/AgathaJPG/coursetitles2.csv' DELIMITERS ','; COPY lecture_csvs FROM '/home/agathaapp/AgathaJPG/lecture_courses2.csv' DELIMITERS ',';  COPY term_csvs FROM '/home/agathaapp/AgathaJPG/terms2.csv' DELIMITERS ',';  COPY attendee_csvs FROM '/home/agathaapp/AgathaJPG/lectures2.csv' DELIMITERS ','; COPY day_csvs FROM '/home/agathaapp/AgathaJPG/days.csv' DELIMITERS ','; COPY willing_teacher_csvs FROM '/home/agathaapp/AgathaJPG/willing_to_teach.csv' DELIMITERS ','; COPY tutorial_csvs FROM '/home/agathaapp/AgathaJPG/tutorials3.csv' DELIMITERS ',' ;

ruby script/generate migration rename_tutorial_tutorial_id_to_tutorial_schedule_id
rake db:migrate

ruby script/generate migration rename_day_upper_to_lower
ruby script/generate migration rename_term_number_to_term_name_id
ruby script/generate model term_name name:string
rake db:migrate

agatha_dev=#  DROP TABLE attendee_csvs; DROP TABLE attendee_csvs; DROP TABLE attendees; DROP TABLE course_csvs; DROP TABLE courses; DROP TABLE   day_csvs; DROP TABLE days; DROP TABLE group_members; DROP TABLE groups; DROP TABLE institutions; DROP TABLE lecture_csvs; DROP TABLE lectures; DROP TABLE locations; DROP TABLE pcourses; DROP TABLE people; DROP TABLE people_csv; DROP TABLE person_csvs; DROP TABLE personstatus_csvs; DROP TABLE programmes; DROP TABLE schema_migrations;DROP TABLE sessions; DROP TABLE status_csvs; DROP TABLE student_courses; DROP TABLE student_programmes; DROP TABLE term_csvs; DROP TABLE term_names; DROP TABLE terms; DROP TABLE test_csv; DROP TABLE tutorial_csvs; DROP TABLE tutorial_schedules; DROP TABLE tutorials; DROP TABLE users; DROP TABLE willing_teacher_csvs; DROP TABLE willing_teachers;

agatha_dev=# COPY person_csvs FROM '/home/agathaapp/AgathaJPG/people.csv' DELIMITERS ',' CSV; COPY status_csvs FROM '/home/agathaapp/AgathaJPG/statuses2.csv' DELIMITERS ',' CSV; COPY personstatus_csvs FROM '/home/agathaapp/AgathaJPG/peoplestatuses.csv' DELIMITERS ',' CSV; COPY course_csvs FROM '/home/agathaapp/AgathaJPG/coursetitles.csv' DELIMITERS ',' CSV; COPY lecture_csvs FROM '/home/agathaapp/AgathaJPG/lecture_courses.csv' DELIMITERS ',' CSV; COPY term_csvs FROM '/home/agathaapp/AgathaJPG/terms.csv' DELIMITERS ',' CSV; COPY attendee_csvs FROM '/home/agathaapp/AgathaJPG/lectures.csv' DELIMITERS ',' CSV; COPY day_csvs FROM '/home/agathaapp/AgathaJPG/days.csv' DELIMITERS ',' CSV; COPY willing_teacher_csvs FROM '/home/agathaapp/AgathaJPG/willing_to_teach.csv' DELIMITERS ',' CSV; COPY tutorial_csvs FROM '/home/agathaapp/AgathaJPG/tutorials.csv' DELIMITERS ',' CSV;

sudo apt-get install irb
ruby script/console
>> User.create(:name => 'agathaapp', :password => '0iRDCsalcs', :password_confirmation => '0iRDCsalcs')

>> TermName.create(:name => 'Hilary');
>> TermName.create(:name => 'Trinity');
>> TermName.create(:name => 'Michaelmas');

id		AutoNumber
old_name	Text
title		Text
first_name	Text	
second_name	Text
postnominals	Text
salutation	Text
term_address	Text
term_city	Text
term_postcode	Text
term_home_phone	Text
term_work_phone	Text
mobile		Text
email		Text
other_address	Text
other_city	Text
other_postcode	Text
other_home_phone	Text
Fax		Text
Notes		Memo
supervisor	Number
entry_year	Number
matriculated	Number
senior_status	Yes/No
programme	Number
religious_house	Number
next_of_kin	Text
home_institution	Number
conventual_name	Text
